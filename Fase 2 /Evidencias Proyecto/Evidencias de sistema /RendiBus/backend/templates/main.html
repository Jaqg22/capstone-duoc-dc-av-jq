{% load static %}
<!DOCTYPE html>
<html lang="es-cl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <link rel="stylesheet" href="{% static 'assets/css/style_main.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/crop_editor.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/camera_modal.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/mobile_options.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/image_preview.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <title>RendiBus - Menú Principal</title>
</head>
<body>
    <main class="contenido_principal">
        <header class="header_main">
            <nav class="navbar">
                <div class="logo_container">
                    <img class="logo_nav" src="{% static 'assets/img/Logo_InterBus-SinFondo2.png' %}" alt="Logo InterBus">
                </div>

                <h1 class="titulo_vista">Menú Principal</h1>
                
                <!-- Información del usuario y rol -->
                <div class="user_info">
                    <span class="user_name">{{ user.get_full_name|default:user.username }}</span>
                    {% if user.groups.all %}
                        <span class="user_role">({{ user.groups.all.0.name }})</span>
                    {% endif %}
                </div>

                <button class="btn_logout" title="Cerrar sesión" onclick="logout()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9" stroke="#003E84" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 17L21 12L16 7" stroke="#003E84" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M21 12H9" stroke="#003E84" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </nav>
        </header>
        
        <div class="hero_section">

        </div>
    </main>

    <footer class="footer_main">
        <div class="footer_container">
            {% if user_permissions.can_create_planilla %}
            <button class="feature_card digital-only" onclick="openModule('planilla-digital')" onKeyDown="handleKeyPress(event, 'planilla-digital')">
                <div class="feature_icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M23 19C23 19.5304 22.7893 20.0391 22.4142 20.4142C22.0391 20.7893 21.5304 21 21 21H3C2.46957 21 1.96086 20.7893 1.58579 20.4142C1.21071 20.0391 1 19.5304 1 19V8C1 7.46957 1.21071 6.96086 1.58579 6.58579C1.96086 6.21071 2.46957 6 3 6H7L9 4H15L17 6H21C21.5304 6 22.0391 6.21071 22.4142 6.58579C22.7893 6.96086 23 7.46957 23 8V19Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <circle cx="12" cy="13" r="4" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <span class="feature_label">Escanear Documento</span>
            </button>
            {% endif %}

            {% if user_permissions.can_create_planilla %}
            <button class="feature_card" onclick="openModule('planilla-manual')" onKeyDown="handleKeyPress(event, 'planilla-manual')">
                <div class="feature_icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 20.7893 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M18.5 2.50001C18.8978 2.10219 19.4374 1.87869 20 1.87869C20.5626 1.87869 21.1022 2.10219 21.5 2.50001C21.8978 2.89784 22.1213 3.4374 22.1213 4.00001C22.1213 4.56262 21.8978 5.10219 21.5 5.50001L12 15L8 16L9 12L18.5 2.50001Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <span class="feature_label">Planilla Manual</span>
            </button>
            {% endif %}

            <button class="feature_card" onclick="openModule('consultas')" onKeyDown="handleKeyPress(event, 'consultas')">
                <div class="feature_icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="11" cy="11" r="8" stroke="white" stroke-width="2"/>
                        <path d="M21 21L16.65 16.65" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <span class="feature_label">Consultas</span>
            </button>
        </div>
        
        <div class="footer_copyright">
            <p>© 2025 RendiBus. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script src="{% static 'assets/js/script_main.js' %}"></script>
    <script src="{% static 'assets/js/crop_editor.js' %}"></script>
</body>
</html>